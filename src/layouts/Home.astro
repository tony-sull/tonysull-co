---
import Layout from './Base.astro'
import ArticlesBlock from '../components/ArticlesBlock.astro'
import Hero from '../components/Hero.astro'

interface Content {
  title: string
  description: string
  blocks: CMS.UI.Block[]
}

interface Props {
  content: Content
}

const { content } = Astro.props as Props
const { title, description, blocks } = content
---

<Layout title={title} description={description} canonicalURL={Astro.request.canonicalURL}>
  {blocks.map(({ type, ...data }) => {
    switch (type) {
      case 'hero':
        return (
          <Hero {...data} />
        )
      case 'articles':
        return (
          <ArticlesBlock {...data} />
        )
    }
  })}
</Layout>